<!DOCTYPE html>
<html lang="en">
  
  <head>
    <script src="js/script1.js"></script> <!-- 将 script.js 文件链接到页面 -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leyan - Portfolio</title>
    <link rel="stylesheet" href="css/style.css">
  </head>
  <div class="portfolio-portal">
    <div class="portal-image">
        <img src="images/MenuMark.png" alt="Image Description">
    </div>
    <div class="portal-buttons">
        <a href="#portfolio">Game Portfolio Portal</a>
        <a href="#others">HCI Portfolio Portal</a>
        <!-- 更多按钮 -->
    </div>
</div>

  <body>
    
    <header style="background-color: #207f4c;">
      <div class="header-content">

        <!-- 头像和欢迎部分 -->
        <div class="profile">
          <img src="images/FirstPhoto.jpg" alt="Leyan Wang">
          <p>Welcome to my personal website！</p>
        </div>

         <!-- 文字提示 -->
        <div class="game-instructions">
          <p>（Playable） →</p>
        </div>
        
        <div class="game-machine">
          <!-- 游戏区域 -->
          <div class="snake-game-container">
            <canvas id="gameCanvas" width="135" height="135"></canvas>
          </div>
          <!-- 按键 -->
          <div class="controls">
            <div class="up-down-buttons">
              <button id="upButton"></button>
            </div>
            <div class="left-right-buttons">
              <button id="leftButton"></button>
              <button id="rightButton"></button>
            </div>
            <div class="up-down-buttons">
              <button id="downButton"></button>
            </div>
          </div>
          <!-- 重新开始按钮 -->
          <div class="restart-button">
            <button id="restartButton">Restart</button>
          </div>
        </div>
      </div>  
    </header>

    <main>

      <section id="about Netsite">
        <div class="vertical-space"></div>
        <h1>———— About this Website ————</h1>
        <div class="vertical-space"></div>
        <div class="about-content">
          <p>Welcome to my personal portfolio website, a digital showcase of my exploration in digital media and game development.
            <br><br>I'm Leyan Wang, delving into the realms of creativity and interactive storytelling. This platform not only displays my personal achievements in these fields but also offers you a gateway to download and experience the games I have crafted.
            <br><br>This website, freshly built and continuously evolving, reflects my commitment to simplicity and functionality, tailored to my individual needs without relying on pre-made themes. It stands as a testament to my journey in web development and design.
            <br><br>Should my work intrigue you or if you have any queries, please feel free to reach out. Your feedback and inquiries are always welcome, as they fuel my growth and innovation in this exciting journey.<br>
          </p>
        </div>
      </section>
      
      <section id="about">
        <div class="vertical-space"></div>
        <h1>———— About Me ————</h1>
        <div class="vertical-space"></div>
        <div class="about-content">
          <img src="images/Close_up.jpg" alt="关于我图片" class="faceup-image">
          <p>My name is Leyan Wang, originally from Tianjin, China. 
            I completed my undergraduate studies at the Communication University of China, majoring in Digital Media Technology with a focus on Game Design Technology. 
            I am proficient in Unity, familiar with Unreal Engine (UE), and have a solid grasp of programming languages including C/C++/C#. 
            Additionally, I have skills in HTML, CSS, and a basic understanding of JavaScript. 
            I'm also well-versed in using Arduino. 
            <br><br>In my spare time, I enjoy swimming, playing badminton, and I have a passion for music, playing both the guitar and piano.<br>
          </p>
        </div>
      </section>

      <section id="portfolio">
        <div class="vertical-space"></div>
        <div class="vertical-space"></div>
        <div class="vertical-space"></div>
        <h1>———— My Game Design Portfolio ————</h1>
        <div class="vertical-space"></div>
        <ul>
          <li class="work-item" onclick="goToWorkPage('works/work1.html')">
              <div class="work-thumbnail">
                <img src="images/VeinCover11.png" alt="作品1图片">
              </div>
              <div class="work-description">
                <p class="work-title">⭐Vein</p>
                <p class="work-text">A Music Rhythm Game with Puzzle-solving Path Planning </p>
              </div>
          </li>
          
          <li class="work-item" onclick="goToWorkPage('works/work3.html')">
            <div class="work-thumbnail">
              <img src="images/LOHCover.png" alt="作品3图片">
            </div>
            <div class="work-description">
              <p class="work-title">⭐The Legend of Hate</p>
              <p class="work-text">A game that is counterintuitive, infuriating, user-unfriendly, annoying, <br>yet addictive
                </p>
            </div>
          </a>
        </li><li class="work-item" onclick="goToWorkPage('works/work4.html')">
          <div class="work-thumbnail">
            <img src="images/PistisCover.png" alt="作品4图片">
          </div>
          <div class="work-description">
            <p class="work-title">⭐Pistis</p>
            <p class="work-text">A Card-based Real-time Action Game</p>
          </div>
        </a>
      </li>
      <li class="work-item" onclick="goToWorkPage('works/work2.html')">
        <div class="work-thumbnail">
          <img src="images/BICover.png" alt="作品2图片">
        </div>
        <div class="work-description">
          <p class="work-title">⭐Babel Inverse</p>
          <p class="work-text">A Card-based Real-time Action Game</p>
        </div>
      </a>
    </li>
      <li class="work-item" onclick="goToWorkPage('works/work5.html')">
        <div class="work-thumbnail">
          <img src="images/KOP/SquareCover.png" alt="作品5图片">
        </div>
        <div class="work-description">
          <p class="work-title">⭐The King of Planting</p>
          <p class="work-text">An Interactive Environmental Piece for Public Spaces</p>
        </div>
      </a>
    </li><li class="work-item" onclick="goToWorkPage('works/work6.html')">
      <div class="work-thumbnail">
        <img src="images/TableFootball/TFCoverSquare.png" alt="作品6图片">
      </div>
      <div class="work-description">
        <p class="work-title">Table Football</p>
        <p class="work-text">A Party Game that Simulates a Complex Toy</p>
      </div>
    </a>
    </li>
    <li class="work-item" onclick="goToWorkPage('works/work7.html')">
      <div class="work-thumbnail">
        <img src="images/AllStarsShine/AllStarsShineCover11.png" alt="作品7图片">
      </div>
      <div class="work-description">
        <p class="work-title">As All Stars Shine</p>
        <p class="work-text">Space Garbage Collection Functional Game</p>
      </div>
    </a>
    </li>

        </ul>
      </section>

        <div class="vertical-space"></div>

        <section id="others">
          <div class="vertical-space"></div>
          <div class="vertical-space"></div>
          <div class="vertical-space"></div>
          <h1>———— My HCI Portfolio ————</h1>
          <div class="vertical-space"></div>
          <ul>
            <li class="work-item" onclick="goToWorkPage('works/work1.html')">
                <div class="work-thumbnail">
                  <img src="images/VeinCover11.png" alt="作品1图片">
                </div>
                <div class="work-description">
                  <p class="work-title">Vein</p>
                  <p class="work-text">A Music Rhythm Game with Puzzle-solving Path Planning </p>
                </div>
            </li>
          </ul>
        </section>



    </main>

    <footer>
      <div class="vertical-space"></div>
      <p>E-mail：light_of_violin@163.com | Phone Number：(+86) 13021329116</p>
      <div class="vertical-space"></div>
      <div class="vertical-space"></div>
    </footer>


    <script>
      // JavaScript代码部分（贪吃蛇游戏逻辑和操作）
      const canvas = document.getElementById('gameCanvas');
      const ctx = canvas.getContext('2d');
      const gridSize = 15;
      const rows = canvas.height / gridSize;
      const cols = canvas.width / gridSize;

      let snake = [];
      snake[0] = { x: 1, y: 4 }; // 贪吃蛇初始位置居中
      snake[1] = { x: 0, y: 4 }; // 贪吃蛇初始长度为2

      let food = generateFood();
      let direction = 'right';

      function draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // 绘制食物
        ctx.fillStyle = 'red';
        ctx.fillRect(food.x * gridSize, food.y * gridSize, gridSize, gridSize);

        // 绘制贪吃蛇
        drawSnake();
      }

      // 绘制蛇的函数
      function drawSnake() {
        // 绘制蛇头颜色
        ctx.fillStyle = "#207f4c"
        ctx.fillRect(snake[0].x * gridSize, snake[0].y * gridSize, gridSize, gridSize);

        // 绘制蛇身颜色
        ctx.fillStyle = "#61649f";;
        for (let i = 1; i < snake.length; i++) {
          ctx.fillRect(snake[i].x * gridSize, snake[i].y * gridSize, gridSize, gridSize);
        }
      }

      function moveSnake() {
        let headX = snake[0].x;
        let headY = snake[0].y;

        // 根据方向移动贪吃蛇头部
        if (direction === 'up') {
          headY--;
          if (headY < 0) headY = rows - 1; // 贪吃蛇头部穿越上边界
        } 
        else if (direction === 'down') {
          headY++;
          if (headY >= rows) headY = 0; // 贪吃蛇头部穿越下边界
        } 
        else if (direction === 'left') {
          headX--;
          if (headX < 0) headX = cols - 1; // 贪吃蛇头部穿越左边界
        } 
        else if (direction === 'right') {
          headX++;
          if (headX >= cols) headX = 0; // 贪吃蛇头部穿越右边界
        }

        // 添加新的头部
        const newHead = { x: headX, y: headY };
        snake.unshift(newHead);

        // 检查是否吃到食物
        if (headX === food.x && headY === food.y) {
          food = generateFood();
        } 
        else {
          snake.pop(); // 移除尾部
        }
    }


    function generateFood() {
      const x = Math.floor(Math.random() * cols);
      const y = Math.floor(Math.random() * rows);
      return { x, y };
    }

    function checkCollision() {
    const head = snake[0];

    // 检查是否碰到自己的身体
    for (let i = 1; i < snake.length; i++) {
        if (snake[i].x === head.x && snake[i].y === head.y) {
            // 游戏结束，显示得分
            alert('Game Over！Your score is：' + (snake.length - 2));
            return true;
        }
    }

    return false;
}
    var looping=true;

    function gameLoop() {
      
      if(looping)
      {
        if (checkCollision()) {
          // 游戏结束
          looping=false;
        } 
        else {
          moveSnake();
          draw();
          setTimeout(gameLoop, 200);
        }
      }
    }

    gameLoop();

    // 监听按钮点击事件，控制贪吃蛇方向
    document.getElementById('leftButton').addEventListener('click', () => {
      if (direction !== 'right') direction = 'left';
    });
    document.getElementById('upButton').addEventListener('click', () => {
      if (direction !== 'down') direction = 'up';
    });
    document.getElementById('downButton').addEventListener('click', () => {
      if (direction !== 'up') direction = 'down';
    });
    document.getElementById('rightButton').addEventListener('click', () => {
      if (direction !== 'left') direction = 'right';
    });

    // 监听重新开始按钮点击事件
    document.getElementById('restartButton').addEventListener('click', () => {
      snake = [];
      snake[0] = { x: 1, y: 4 }; // 贪吃蛇初始位置居中
      snake[1] = { x: 0, y: 4 }; // 贪吃蛇初始长度为2

      food = generateFood();
      direction = 'right';
      if(!looping)
      {
        looping=true;// 重新开始游戏循环
        gameLoop();
      }
    });
    </script>

    <script>
      function goToWorkPage(url) {
      // 添加页面渐变效果
      document.body.style.transition = 'opacity 0.5s ease';
      document.body.style.opacity = '0';
      
      // 等待一小段时间，再进行页面跳转
      setTimeout(function() {
        window.location.href = url;
      }, 500); // 0.5秒后跳转页面

      sessionStorage.setItem('mainScrollPosition', window.scrollY);
    }
    </script>

    <script>  
      // 主页的代码
      document.addEventListener('DOMContentLoaded', function() {
        if (sessionStorage.getItem('mainScrollPosition') !== null) {
            window.scrollTo(0, parseInt(sessionStorage.getItem('mainScrollPosition')));
            sessionStorage.removeItem('mainScrollPosition'); // 清除存储的位置
        }
      });

      window.onscroll = function() {
        var header = document.querySelector('header');
        var profileImage = header.querySelector('.profile img');
        var profileText = header.querySelector('.profile p');
        var portfolioButton = document.querySelector('.portfolio-portal');
        var headerOriginalHeight = 250; // 初始header高度为250px
        var headerMinHeight = 50; // header的最小高度
        var scrollDistance = window.pageYOffset;

        // 调整header高度
        var headerHeight = Math.max(headerMinHeight, headerOriginalHeight - scrollDistance);
        header.style.height = headerHeight + 'px';

        // 根据header高度调整头像尺寸
        var imageSizeReduction = headerOriginalHeight - headerHeight;
        var newImageSize = Math.max(45, 180 - imageSizeReduction * (180 - 45) / (headerOriginalHeight - headerMinHeight));
        profileImage.style.width = newImageSize + 'px';
        profileImage.style.height = newImageSize + 'px';

        // 根据header高度调整头像位置
        profileImage.style.top = (headerHeight - newImageSize) / 2 + 'px';
        profileText.style.top = (headerHeight-25)/2 + 'px';
        profileText.style.left = newImageSize + 20+ 'px';

        // 调整其他内容的透明度
        var opacity = Math.max(0, (headerHeight - headerMinHeight) / (headerOriginalHeight - headerMinHeight));
        var otherContent = header.querySelectorAll('.header-content > *:not(.profile)');
        otherContent.forEach(function(content) {
            content.style.opacity = opacity;
        });

        portfolioButton.style.top = headerHeight + 'px'
      };

      document.addEventListener('DOMContentLoaded', function() {
          // 检查初始滚动位置
          checkScrollPosition();

          window.addEventListener('scroll', checkScrollPosition);
      });

      function checkScrollPosition() {
          var scrollPosition = window.scrollY;
          var portal = document.querySelector('.portfolio-portal');

          if (scrollPosition === 0) {
              // 页面在顶部，自动展示跳转按钮页
              portal.classList.add('show');
          } else {
              // 页面非顶部，需要悬停才能显示跳转按钮页
              portal.classList.remove('show');
          }
      }

    </script>
  </body>

  
</html>
